<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras - Dulcer√≠a Estrella</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- IMPORTANTE: Debe cargar el header IGUAL que las otras p√°ginas -->
    <div id="header-placeholder"></div>

    <main class="carrito-container">
        <h1>Tu Carrito de Compras</h1>
        
        <!-- Carrito vac√≠o -->
        <div id="carrito-vacio" style="display: none;">
            <h2>üò¢ Tu carrito est√° vac√≠o</h2>
            <p>No has agregado productos a√∫n</p>
            <a href="index.html" class="btn-volver">Volver a la tienda</a>
        </div>

        <!-- Secci√≥n cuando hay productos -->
        <div id="carrito-lleno" style="display: none;">
            <div id="contenido-carrito">
                <!-- Los productos aparecer√°n aqu√≠ con JavaScript -->
            </div>

            <div class="resumen-compra">
                <h3>Total: <span id="total-precio">$0.00</span></h3>
                <button class="btn-comprar" id="btn-finalizar-compra">Finalizar Compra</button>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <!-- SCRIPTS PARA carrito.html -->
    <script>
        // 1. Cargar header din√°micamente (IGUAL que en fiestas.html)
        fetch("header.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("header-placeholder").innerHTML = data;
                console.log("‚úÖ Header cargado en carrito.html");
            })
            .catch(error => console.error("Error cargando header:", error));

        fetch("footer.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("footer-placeholder").innerHTML = data;
                console.log("‚úÖ Footer cargado en carrito.html");
            })
            .catch(error => console.error("Error cargando footer:", error));
    </script>

    <!-- 2. Incluir carrito.js PRIMERO (tiene la funci√≥n finalizarCompra) -->
    <script src="carrito.js"></script>
    
    <!-- 3. Incluir mostrarCarrito.js para mostrar los productos -->
    <script src="mostrarCarrito.js"></script>

    <!-- 4. Script adicional para conectar el bot√≥n de finalizar compra -->
    <script>
        // Esperar a que todo cargue
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üìÑ carrito.html - DOM cargado");
            
            
            setTimeout(function() {
                console.log("üîç Buscando bot√≥n de finalizar compra...");
                
                
                const btnFinalizar = document.getElementById('btn-finalizar-compra');
                
                if (btnFinalizar) {
                    console.log("‚úÖ Bot√≥n de finalizar compra encontrado");
                    
                    btnFinalizar.addEventListener('click', function() {
                        console.log("üõí Bot√≥n 'Finalizar Compra' clickeado");
                        
                        
                        if (typeof finalizarCompra === 'function') {
                            console.log("‚úÖ Llamando a funci√≥n finalizarCompra()");
                            finalizarCompra();
                        } else {
                            console.error("‚ùå ERROR: No se encontr√≥ la funci√≥n finalizarCompra");
                            alert("Error: No se puede procesar la compra. Recarga la p√°gina.");
                        }
                    });
                } else {
                    console.log("‚ö†Ô∏è No se encontr√≥ bot√≥n con id 'btn-finalizar-compra'");
                    
                    // Intentar buscar por clase
                    const btnPorClase = document.querySelector('.btn-comprar');
                    if (btnPorClase) {
                        console.log("‚úÖ Bot√≥n encontrado por clase");
                        btnPorClase.id = 'btn-finalizar-compra';
                        btnPorClase.addEventListener('click', function() {
                            if (typeof finalizarCompra === 'function') {
                                finalizarCompra();
                            }
                        });
                    }
                }
            }, 1000); // Esperar 1 segundo
        });
    </script>

</body>
</html>